<Project>
  <!-- Package Release Notes from File -->
  <Target Name="PreparePackageReleaseNotesFromFile" BeforeTargets="GenerateNuspec">
    <PropertyGroup>
      <PackageReleaseNotes Condition="Exists('$(MSBuildThisFileDirectory)RELEASE_NOTES.md')">$([System.IO.File]::ReadAllText('$(MSBuildThisFileDirectory)RELEASE_NOTES.md'))</PackageReleaseNotes>
    </PropertyGroup>
  </Target>

  <!-- Validate Package Properties -->
  <Target Name="ValidatePackageProperties" BeforeTargets="Pack">
    <Error Text="PackageDescription is required for packaging - template placeholder PROJECT_DESCRIPTION found" 
           Condition="'$(Description)' == '' OR '$(Description)' == 'PROJECT_DESCRIPTION'" />
    <Error Text="PackageAuthor is required for packaging - template placeholder LIBRARY_AUTHOR found" 
           Condition="'$(Authors)' == '' OR '$(Authors)' == 'LIBRARY_AUTHOR'" />
    <Error Text="Template placeholder LIBRARY_COMPANY found - please provide a proper company name" 
           Condition="$([System.String]::Copy('$(Company)').Contains('LIBRARY_COMPANY'))" />
    <Error Text="Template placeholder REPOSITORY_URL found - please provide a proper repository URL" 
           Condition="$([System.String]::Copy('$(PackageProjectUrl)').Contains('REPOSITORY_URL'))" />
    <Error Text="Template placeholder LIBRARY_TAGS found - please provide proper package tags" 
           Condition="$([System.String]::Copy('$(PackageTags)').Contains('LIBRARY_TAGS'))" />
    <Warning Text="PackageReleaseNotes is recommended for packaging" Condition="'$(PackageReleaseNotes)' == ''" />
  </Target>
</Project>
